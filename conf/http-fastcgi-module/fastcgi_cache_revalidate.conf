events{}

http {
  fastcgi_cache_path /tmp/php_cache levels=1:2 keys_zone=cache_php:30m inactive=5s max_size=10g;
  server {
    location / {
      root /tmp/php;
      fastcgi_pass 127.0.0.1:9000;
      include fastcgi_params;
      fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
      
      fastcgi_temp_path /tmp/fastcgi/temp;
      fastcgi_cache   cache_php;
      # 为什么设置的5s没有起作用
      # nginx并没有在5s之后重新发起请求, 设置点在fastcgi_cache_path 的inactive的值得
      # 不过还是没有让fastcgi_cache_revalidate 起作用， 什么叫expired cache
      fastcgi_cache_valid   200 302  5h;
      fastcgi_cache_key $request_uri;

      #fastcgi_cache_revalidate on;
    }
  }
}
